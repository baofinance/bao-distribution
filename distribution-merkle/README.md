# BAOv2 Distribution Merkle Tree

Accounts that can verify their inclusion in the merkle tree generated from `snapshot.json` will be eligible to start their BAOv2 distribution.

## Information
The merkle root generated by the data in `snapshot.json` will be immutably set in the `BaoDistribution.sol` contract in the parent directory.
**Once BAO distribution has concluded on both mainnet and xDAI**, this snapshot will be final. A sufficient warning will be given to the
community before taking this snapshot, giving accounts the opportunity to claim any pending BAO.

If you'd like to verify that the Distribution contract's merkle root is in-fact correct, feel free to generate it yourself 
with this utility and compare it to what exists in the `BaoDistribution` contract. Once the snapshot is taken, the merkle root
that was generated will be added to this README and `snapshot.json` will never be updated again.

## Generate Snapshot
To generate a snapshot of BaoV1 locked balances on both mainnet and xDAI, run `yarn snapshot`.

## Generate Merkle Tree
To generate a merkle tree from the data in `snapshot.json`, run `yarn start`.

### Tree Leaves
The merkle tree's leaves consist of the address and the balance of locked BAO owed to them. 

In solidity:
```solidity
address _account = address(0); // Your address
uint256 _amount = 1e22; // Amount to distribute over 2 years
bytes32 leaf = keccak256(abi.encodePacked(_account, _amount));
```

In typescript (with `ethers.js`):
```typescript
const getLeaf = (address: string, amount: string): string =>
  ethers.utils.keccak256(
    ethers.utils.solidityPack(
      ['address', 'uint256'],
      [address, amount]
    )
  );
```